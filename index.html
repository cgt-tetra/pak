<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CGT TetraPak Â· SecciÃ³n Sindical</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âœŠ</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,300&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- NAV -->
<nav>
  <a href="index.html" class="nav-logo">âœŠ <span>CGT</span> TETRAPAK</a>
  <ul class="nav-links">
    <li><a href="index.html" class="active">Inicio</a></li>
    <li><a href="actas.html">Actas</a></li>
    <li><a href="comics.html">CÃ³mics</a></li>
  </ul>
</nav>

<!-- HERO -->
<section id="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid-lines"></div>
  <div class="hero-content">
    <p class="hero-eyebrow">SecciÃ³n Sindical Â· Tetra Pak Envases S.A. Â· Arganda del Rey</p>
    <span class="hero-fist" aria-hidden="true">âœŠ</span>
    <h1 class="hero-title">
      <span class="cgt">CGT</span>
      <span class="empresa">Tetra Pak</span>
      <span class="sub">ComitÃ© de Empresa</span>
    </h1>
    <p class="hero-tagline">Defendiendo tus derechos.<br><strong>Tu voz en la empresa.</strong></p>
    <div class="hero-actions">
      <a href="https://chat.whatsapp.com/I9oRl9Ud369EzwdWAlFabI" target="_blank" class="btn btn-primary">
        ğŸ’¬ Ãšnete al WhatsApp
      </a>
      <a href="actas.html" class="btn btn-outline">
        ğŸ“„ Ver Actas
      </a>
      <a href="comics.html" class="btn btn-outline">
        ğŸ¨ Ver CÃ³mics
      </a>
    </div>
  </div>
  <div class="scroll-down">
    <div class="scroll-down-line"></div>
    <span>scroll</span>
  </div>
</section>

<!-- TICKER -->
<div class="ticker-wrap" aria-hidden="true">
  <div class="ticker-inner">
    <span class="ticker-item">DERECHOS LABORALES</span>
    <span class="ticker-item">CGT TETRA PAK</span>
    <span class="ticker-item">CONVENIO COLECTIVO</span>
    <span class="ticker-item">COMITÃ‰ DE EMPRESA</span>
    <span class="ticker-item">SOLIDARIDAD OBRERA</span>
    <span class="ticker-item">NEGOCIACIÃ“N COLECTIVA</span>
    <span class="ticker-item">DERECHOS LABORALES</span>
    <span class="ticker-item">CGT TETRA PAK</span>
    <span class="ticker-item">CONVENIO COLECTIVO</span>
    <span class="ticker-item">COMITÃ‰ DE EMPRESA</span>
    <span class="ticker-item">SOLIDARIDAD OBRERA</span>
    <span class="ticker-item">NEGOCIACIÃ“N COLECTIVA</span>
  </div>
</div>

<!-- ENLACES -->
<div id="enlaces">
  <div class="inner">
    <div class="section-header reveal">
      <p class="section-label">Recursos</p>
      <h2 class="section-title">ENLACES<br>IMPORTANTES</h2>
      <div class="section-divider"></div>
    </div>

    <div class="links-grid reveal">
      <a href="https://chat.whatsapp.com/I9oRl9Ud369EzwdWAlFabI" target="_blank" class="link-card whatsapp">
        <div class="link-icon">ğŸ’¬</div>
        <div class="link-card-body">
          <div class="link-card-title">WhatsApp CGT</div>
          <div class="link-card-desc">Comunidad Â· Ãšnete gratis</div>
        </div>
        <div class="link-card-arrow">â†’</div>
      </a>

      <a href="https://www.bocm.es/bocm-20250927-1" target="_blank" class="link-card">
        <div class="link-icon">ğŸ“°</div>
        <div class="link-card-body">
          <div class="link-card-title">Convenio BOCM</div>
          <div class="link-card-desc">Tetra Pak Envases S.A.</div>
        </div>
        <div class="link-card-arrow">â†’</div>
      </a>

      <a href="https://linktr.ee/comiteTetraPak" target="_blank" class="link-card">
        <div class="link-icon">ğŸ­</div>
        <div class="link-card-body">
          <div class="link-card-title">ComitÃ© de Tetra Pak</div>
          <div class="link-card-desc">Protegiendo lo bueno</div>
        </div>
        <div class="link-card-arrow">â†’</div>
      </a>

      <a href="https://sso.tetrapak.com/idp/startSSO.ping?PartnerSpId=ssomanager.neeyamo.com%2Fsaml%2FSSO%2Falias%2FNeosuitetetrapak_TetraPak" target="_blank" class="link-card">
        <div class="link-icon">ğŸ’°</div>
        <div class="link-card-body">
          <div class="link-card-title">Acceso a NÃ³mina</div>
          <div class="link-card-desc">Portal Neeyamo</div>
        </div>
        <div class="link-card-arrow">â†’</div>
      </a>

      <a href="https://tetrapakparati.com" target="_blank" class="link-card">
        <div class="link-icon">ğŸŒ</div>
        <div class="link-card-body">
          <div class="link-card-title">tetrapakparati.com</div>
          <div class="link-card-desc">Portal empleados</div>
        </div>
        <div class="link-card-arrow">â†’</div>
      </a>

      <a href="https://cgt.org.es" target="_blank" class="link-card">
        <div class="link-icon">âœŠ</div>
        <div class="link-card-body">
          <div class="link-card-title">CGT Nacional</div>
          <div class="link-card-desc">ConfederaciÃ³n General</div>
        </div>
        <div class="link-card-arrow">â†’</div>
      </a>
    </div>
  </div>
</div>

<!-- ACTAS PREVIEW -->
<section id="actas">
  <div class="section-header reveal">
    <p class="section-label">Ãšltimas</p>
    <h2 class="section-title">ACTAS DE<br>REUNIONES</h2>
    <div class="section-divider"></div>
  </div>

  <div id="actas-container" class="reveal"></div>

  <div class="section-actions">
    <a href="actas.html" class="btn btn-outline">ğŸ“„ Ver todas las actas â†’</a>
  </div>
</section>

<!-- COMICS PREVIEW -->
<div id="comics">
  <div class="inner">
    <div class="section-header reveal">
      <p class="section-label">Ãšltimos</p>
      <h2 class="section-title">CÃ“MICS DE<br>REUNIONES</h2>
      <div class="section-divider"></div>
    </div>

    <div id="comics-container" class="reveal"></div>

    <div class="section-actions">
      <a href="comics.html" class="btn btn-outline">ğŸ¨ Ver todos los cÃ³mics â†’</a>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <p>âœŠ <strong>CGT Tetra Pak Envases S.A.</strong> Â· SecciÃ³n Sindical Â· Arganda del Rey, Madrid</p>
  <p style="margin-top:0.5rem;">
    <a href="https://linktr.ee/CGTTetraPak" target="_blank">Linktree</a> Â·
    <a href="https://chat.whatsapp.com/I9oRl9Ud369EzwdWAlFabI" target="_blank">WhatsApp</a> Â·
    <a href="https://cgt.org.es" target="_blank">CGT Nacional</a>
  </p>
  <p style="margin-top:1rem; color:#222;">Defendiendo tus derechos</p>
</footer>

<div id="modal-overlay" onclick="closeModal(event)">
  <div id="modal-box">
    <img id="modal-img" src="" alt="">
    <div id="modal-html-container" style="background:white;max-width:90vw;max-height:85vh;overflow:auto;display:none;"></div>
  </div>
  <button id="modal-close" onclick="closeModalDirect()">âœ•</button>
</div>

<script src="common.js"></script>
<script>
async function loadActasPreview() {
  const container = document.getElementById('actas-container');
  try {
    const res = await fetch('actas/index.json');
    if (!res.ok) throw new Error('no index');
    let data = await res.json();
    
    if (data.length && typeof data[0] === 'string') {
      data = data.map(f => ({ archivo: f, titulo: '', fecha: '', categoria: '' }));
    }
    
    data = data
      .map(item => ({...item, ...formatFileName(item.archivo)}))
      .sort((a,b) => b.dateSort.localeCompare(a.dateSort))
      .slice(0, 4);

    if (!data.length) throw new Error('empty');

    container.innerHTML = data.map(item => {
      const displayTitle = item.titulo || item.title;
      const cat = item.categoria ? ` Â· ${item.categoria}` : '';
      return `
        <a href="actas/${item.archivo}" target="_blank" class="acta-card">
          <div class="acta-icon">ğŸ“„</div>
          <div class="acta-info">
            <div class="acta-nombre">${displayTitle}</div>
            <div class="acta-meta">${item.date}${cat}</div>
          </div>
          <div class="acta-badge">PDF</div>
        </a>`;
    }).join('');

  } catch(e) {
    container.innerHTML = `<p style="grid-column:1/-1;text-align:center;color:#555;">No hay actas disponibles</p>`;
  }
}

async function loadComicsPreview() {
  const container = document.getElementById('comics-container');
  try {
    const res = await fetch('comics/index.json');
    if (!res.ok) throw new Error('no index');
    let data = await res.json();

    if (data.length && typeof data[0] === 'string') {
      data = data.map(f => ({ archivo: f, titulo: '', fecha: '' }));
    }

    data = data
      .map(item => ({...item, ...formatFileName(item.archivo)}))
      .sort((a,b) => b.dateSort.localeCompare(a.dateSort))
      .slice(0, 4);

    if (!data.length) throw new Error('empty');

    container.innerHTML = data.map(item => {
      const displayTitle = item.titulo || item.title;
      const isHtml = item.archivo.endsWith('.html');
      const isImg = /\.(png|jpg|jpeg|gif|webp)$/i.test(item.archivo);
      const tag = isHtml ? 'HTML' : 'IMAGEN';

      const thumb = isImg
        ? `<img class="comic-thumb" src="comics/${item.archivo}" alt="${displayTitle}" loading="lazy">`
        : `<div class="comic-thumb-placeholder"><span class="ph-icon">ğŸ¨</span><span class="ph-label">CÃ“MIC ${tag}</span></div>`;

      return `
        <div class="comic-card" onclick="${isHtml ? `openModal('comics/${item.archivo}', true)` : `openModal('comics/${item.archivo}')`}">
          ${thumb}
          <div class="comic-expand-btn">â›¶</div>
          <div class="comic-card-body">
            <div class="comic-tag">${tag}</div>
            <div class="comic-card-title">${displayTitle}</div>
            <div class="comic-card-meta">${item.date}</div>
          </div>
        </div>`;
    }).join('');

  } catch(e) {
    container.innerHTML = `<p style="grid-column:1/-1;text-align:center;color:#555;">No hay cÃ³mics disponibles</p>`;
  }
}

loadActasPreview();
loadComicsPreview();
</script>

</body>
</html>
